# ⚡ 性能与调优 (Performance)

## 1. 单线程速度瓶颈

对于绝大多数普通用户，只要带宽 < 500Mbps，几乎感觉不到瓶颈。但对于千兆 (1000Mbps) 及以上宽带用户，代理软件的**单线程性能**至关重要。

* **地理位置影响**:
    * **三边形城市 (武汉/合肥等)**: 距离各大出口较为均衡，影响较小。
    * **远距离省份**: 广东连沪日节点、北方连粤港节点等。
* **瓶颈现象**:
    * 在类 Unix (Linux/macOS) 默认参数下，如果距节点入口延迟 **> 25ms**，单线程下载速度往往会卡在 **~650 Mbps**。
* **解决方案**:
    * 刚需 **OpenWrt** 或 **Linux** 系统。
    * 进行 **TCP 调优 (打鸡血)**：修改内核参数 (sysctl.conf) 优化 TCP 窗口和拥塞控制算法。
    * *注: macOS 和普通硬路由较难进行此类深度调优。*

## 2. 软路由硬件避坑

* **Mac Mini (M4) vs OpenWrt**:
    * 虽然 Mac Mini M4 性能强大，但 macOS 的网络栈处理效率在做“软路由”时不如 Linux 高效。
    * **测试数据**: 在特定场景下，Mac Mini 跑代理的吞吐量甚至不如 400 元档位使用 RK3582 芯片的 OpenWrt 硬路由。
    * **建议**: 如果追求万兆跑满或极致性能，建议在 Mac 上使用 OrbStack/PD 虚拟化一个 OpenWrt/Linux 来跑代理，而不是直接使用 macOS 版的 Surge/Stash。
